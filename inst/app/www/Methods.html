


<p><span style="color: red;"><strong>NOTE</strong></span></p>
<p>This documentation is still under review. Be aware that the content may change. Check the github commit history for this project’s <a href="github.com/apeterson91/ptpt">repo</a> to see when changes are made.</p>
<div id="overview" class="section level1">
<h1>Overview</h1>
<p>The methodology underlying the PTPT falls under two headings (1) Data Collection and (2) Substantive Questions. Data collection is laid out in three stages with increasing difficulty and correspondingly higher quality data associated with each successive stage. Methods for investigating substantive questions develop in parallel to Data Collection; models and estimates discussed under this heading should be available with minor adjustment for each of the three data stages. These methods are understood to be open ended and falling under two headings: (1) Descriptive and (2) Prescriptive. That is, methods are developed with the intent to describe the current state of transit use in Pittsburgh, as well as to “prescribe” in decision theoretic terms, what actions (interventions, programs, etc.) may lead to a greater uptake in one mode of transit over another.</p>
</div>
<div id="data-collection" class="section level1">
<h1>Data Collection</h1>
<p>Before explaining the strategy behind each stage of data collection we introduce notation so that the technical reader can identify consistent terms across all stages of data collection and methods.</p>
<p>Consider the <span class="math inline">\(i\)</span>th PGH resident, <span class="math inline">\((i=1,...,N)\)</span> who performs each of <span class="math inline">\(K\)</span> trips on a regular basis, say a typical week. We assume, to start, that the mode of transit is fixed per trip - a person <strong>only</strong> walks (for example) to the grocery store. The mode of transit for the <span class="math inline">\(i\)</span>th resident is denoted as <span class="math inline">\(m_i\)</span>, where <span class="math inline">\(m_i \in \{1,...,M\}\)</span> and <span class="math inline">\(M\)</span> is the total possible modes of transit. This resident may also have certain characteristics, such as race, income, etc. that may be relevant to understanding their mode choice. We denote the vector of these <span class="math inline">\(p\)</span> characteristics as <span class="math inline">\(Z_i \in \mathbb{R}^{p}\)</span>. Similarly, we measure route-specific characteristics, <span class="math inline">\(X_i \in \mathbb{R}^q\)</span>, which may include the difference in expected travel time to a given destination between biking and driving.</p>
<p>With this preliminary notation aside, we now describe how these data are collected or generated in each of the three stages constituting the PTPT’s development.</p>
<div id="stage-1-simulated-data" class="section level2 tabset">
<h2 class="tabset">Stage 1: Simulated Data</h2>
<div id="ypswbrtldx" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#ypswbrtldx .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#ypswbrtldx .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ypswbrtldx .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#ypswbrtldx .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 4px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#ypswbrtldx .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ypswbrtldx .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ypswbrtldx .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#ypswbrtldx .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#ypswbrtldx .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#ypswbrtldx .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#ypswbrtldx .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#ypswbrtldx .gt_group_heading {
  padding: 8px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#ypswbrtldx .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#ypswbrtldx .gt_from_md > :first-child {
  margin-top: 0;
}

#ypswbrtldx .gt_from_md > :last-child {
  margin-bottom: 0;
}

#ypswbrtldx .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#ypswbrtldx .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#ypswbrtldx .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ypswbrtldx .gt_first_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#ypswbrtldx .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ypswbrtldx .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#ypswbrtldx .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#ypswbrtldx .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ypswbrtldx .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ypswbrtldx .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 4px;
}

#ypswbrtldx .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ypswbrtldx .gt_sourcenote {
  font-size: 90%;
  padding: 4px;
}

#ypswbrtldx .gt_left {
  text-align: left;
}

#ypswbrtldx .gt_center {
  text-align: center;
}

#ypswbrtldx .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#ypswbrtldx .gt_font_normal {
  font-weight: normal;
}

#ypswbrtldx .gt_font_bold {
  font-weight: bold;
}

#ypswbrtldx .gt_font_italic {
  font-style: italic;
}

#ypswbrtldx .gt_super {
  font-size: 65%;
}

#ypswbrtldx .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 65%;
}
</style>
<table class="gt_table">
  <caption>Table 1</caption>
  <thead class="gt_header">
    <tr>
      <th colspan="2" class="gt_heading gt_title gt_font_normal gt_bottom_border" style>Data Sources</th>
    </tr>
    
  </thead>
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">Organization</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">Dataset</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td class="gt_row gt_left">WPRDC</td>
<td class="gt_row gt_left">Neighborhood Boundaries</td></tr>
    <tr><td class="gt_row gt_left">WPRDC</td>
<td class="gt_row gt_left">Street Lines</td></tr>
    <tr><td class="gt_row gt_left">WPRDC</td>
<td class="gt_row gt_left">Bike Lines</td></tr>
    <tr><td class="gt_row gt_left">WPRDC</td>
<td class="gt_row gt_left">Zoning Boundaries</td></tr>
    <tr><td class="gt_row gt_left">WPRDC</td>
<td class="gt_row gt_left">Land Parcels</td></tr>
    <tr><td class="gt_row gt_left">OSM</td>
<td class="gt_row gt_left">Grocery Store Locations</td></tr>
    <tr><td class="gt_row gt_left">OSM</td>
<td class="gt_row gt_left">Trip Routes/Times</td></tr>
  </tbody>
  
  
</table>
</div>
<div id="big-picture" class="section level3">
<h3>Big Picture</h3>
<p>The first stage of data “collection” for the PTPT is using simulated data. There are several reasons for this. To begin with, simulating data is cheap and quick while still providing some semblance of realism. Indeed, using the wealth of data sources available through the <a href="http://www.wprdc.org/">WPRDC</a> as well as American Community Survey data available through the <a href="https://www.census.gov/programs-surveys/acs">census</a>, open source data available through <a href="https://www.openstreetmap.org/">openstreetmap</a>, elevation data provided by <a href="https://earthdata.nasa.gov/esds/competitive-programs/measures/nasadem">NASA</a>, and more that can be seen in Table 1, simulated data offer us the chance to quickly summon various scenarios of how transit behavior may vary amongst Pittsburgh residents. To this end, we sample 100 fictitious residents across the 88 neighborhoods of Pittsburgh, assign them a random residential parcel and generate three trips - grocery, commute and social - by three modes of transit - walking, biking and driving a personal vehicle. From these we then generate a mode of transit using a discrete choice model. See the Technical Tab for further details.</p>
<p>Further work in generating data will incorporate further modes of transit, and hypothetical modes of data collection that account for shared household trips, e.g. two subject participants make two different commute trips, but one shared grocery trip. These two will be of primary focus to better reflect both the transit reality of Pittsburghers as well as the likely reality of future data collection - clustered sampling - to which we now turn in greater detail in the next section.</p>
</div>
<div id="technical" class="section level3">
<h3>Technical</h3>
<p>We follow previous work in the transit literature by simulating data under a discrete choice model framework [ben1985discrete; <span class="citation">Páez, Scott, and Volz (2008)</span>; goetzke2008]. Specifically we generate <span class="math inline">\(m_i \in \{\text{Bike},\text{Walk},\text{Drive}\}\)</span>, where the odds of biking and walking to a destination are modeled on a logit scale as a function of both subject level characteristics, <span class="math inline">\(Z_i\)</span>, and route specific characteristics <span class="math inline">\(X_i\)</span>, which include the difference in estimated trip time duration between biking/walking and driving, or, in the future, the perceived physical difficulty of the route measured by e.g.  average route gradient. The general model is then,</p>
<p><span class="math display">\[\begin{equation}
m_i | X_i,Z_i \sim \text{Multinomial}(\pi^{b}_i,\pi^w_i,\pi_i^d) \\
\log(\frac{\pi_i^b}{\pi_i^d}) = \alpha_b + f_b(X_i) + g_b(Z_i)\\
\log(\frac{\pi_i^w}{\pi_i^d}) = \alpha_w + f_w(X_i) + g_w(Z_i),
(\#eq:s1model)
\end{equation}\]</span></p>
<p>where <span class="math inline">\(\pi_i^b,\pi_i^w,\pi_i^d\)</span> are the respective probabilities of the <span class="math inline">\(i\)</span>th person biking, walking or driving to a destination, respectively, and <span class="math inline">\(f_*(X_i)\)</span>^{the asterik here refers to either the biking or walking function} and <span class="math inline">\(g_*(Z_i)\)</span> are the unknown functions of person and route specific traits that influence an individual’s propensity to bike or walk instead of drive to a specific destination. For example, it is likely the case that one may be more inclined to bike or walk to a destination if the difference between walking and driving is small and the overall trip time is expected to be low, to reduce the hassle of driving and parking. However this inclination will rapidly decline as the difference increases and the overall absolute trip time increases. Consequently, we formulate this understanding by having <span class="math inline">\(g_*(\cdot)\)</span> be an exponential function of the aforementioned quantities.</p>
<p>For a full understanding of how the data are generated we encourage the interested reader to see the code in the <code>data_raw/</code> folder in this project’s <a href="https://github.com/apeterson91/PTPT">github repo</a>.</p>
<div id="known-omissions" class="section level4">
<h4>Known omissions</h4>
<p>The modeling framework described above contains a number of known omissions we briefly enumerate here and leave for future version updates of stage 1 of the PTPT. The first is the omission of social dependency effects in the mean function of @ref(eq:s1model) and explored in <span class="citation">(Páez, Scott, and Volz 2008; Goetzke 2008)</span>. Future versions of the PTPT will look to incorporate these effects.</p>
<p>While not explicitly an omission, a final weakness associated with simulated data we acknowledge is that the data are <em>not</em> observations of individuals making decisions about how to move about Pittsburgh. Our second stage dataset addresses this concern and builds upon the previous work laid out in stage 1.</p>
</div>
</div>
</div>
<div id="stage-2-convenience-sample" class="section level2">
<h2>Stage 2: Convenience Sample</h2>
<p>Data collected in stage 2 represent a convenience sample drawn from members of Bike PGH’s neighborhood advocacy network. While certainly <strong>not</strong> a random sample of the greater Pittsburgh community, this sample does offer the chance to test the mechanics underlying the PTPT and roll-up the online survey submission process associated with the PTPT as well as address any early concerns that may arise in administering the online survey.</p>
<p>From a technical standpoint, even though these data are not indepndent, there is still much that can be learned from using these data, and we plan to utilize methods from the post-stratification literature <span class="citation">(Gelman 2007; Lumley 2011)</span> in order to derive estimates that are more representative of the city.</p>
</div>
<div id="stage-3-designed-sample" class="section level2">
<h2>Stage 3: Designed Sample</h2>
<p>The final stage would be a designed sample targeting households in the city of Pittsburgh and explicitly modeling non-response. This represents the final stage of possible data collection for the PTPT, the highest quality data and, the most difficult data to acquire for this project.</p>
</div>
</div>
<div id="substantive-questions" class="section level1">
<h1>Substantive Questions</h1>
<div id="propensity-to-transit---the-estimand-of-interest" class="section level2">
<h2>Propensity to transit - the estimand of interest</h2>
<p>The primary estimand of interest and key indicator by which progress towards the goal of non-car dependence is measured is the probability of an individual in the Pittsburgh area to use transit - a non-single passenger vehicle mode - to complete a within-city (or potentially within-county) trip, <span class="math inline">\(\pi_t\)</span>.</p>
</div>
<div id="transit-factors" class="section level2">
<h2>Transit factors</h2>
<p>In addition to estimating <span class="math inline">\(\pi_t\)</span> we are interested in what factors influence <span class="math inline">\(\pi_t\)</span>. These include the functions <span class="math inline">\(f_*(X_i)\)</span> and <span class="math inline">\(g_*(Z_i)\)</span> described earlier.</p>
</div>
</div>
<div id="discussion" class="section level1">
<h1>Discussion</h1>
</div>
<div id="references" class="section level1 unnumbered">
<h1 class="unnumbered">References</h1>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-gelman2007struggles" class="csl-entry">
Gelman, Andrew. 2007. <span>“Struggles with Survey Weighting and Regression Modeling.”</span> <em>Statistical Science</em> 22 (2): 153–64.
</div>
<div id="ref-goetzke2008" class="csl-entry">
Goetzke, Frank. 2008. <span>“Network Effects in Public Transit Use: Evidence from a Spatially Autoregressive Mode Choice Model for New York.”</span> <em>Urban Studies</em> 45 (2): 407–17. <a href="https://doi.org/10.1177/0042098007085970">https://doi.org/10.1177/0042098007085970</a>.
</div>
<div id="ref-lumley2011complex" class="csl-entry">
Lumley, Thomas. 2011. <em>Complex Surveys: A Guide to Analysis Using r</em>. Vol. 565. John Wiley &amp; Sons.
</div>
<div id="ref-paez2008discrete" class="csl-entry">
Páez, Antonio, Darren M Scott, and Erik Volz. 2008. <span>“A Discrete-Choice Approach to Modeling Social Influence on Individual Decision Making.”</span> <em>Environment and Planning B: Planning and Design</em> 35 (6): 1055–69.
</div>
</div>
</div>
